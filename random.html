<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Random HT22</title>
    <link rel="stylesheet" href="random.css" />
    <script rel="" type="text/javascript" src="random.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.js"></script>
  </head>
  <body>
    <div>
      <h1>Random nhóm HT22</h1>
      <div class="random">
        <div class="random">
          <div class="parent-btn">
            <input type="text" />
            <button id="add">Add</button>
          </div>
          <div class="parent-ol">
            <ol id="group1">
              Nhóm 1
            </ol>
            <ol id="group2">
              Nhóm 2
            </ol>
            <ol id="group3">
              Nhóm 3
            </ol>
            <ol id="group4">
              Nhóm 4
            </ol>
            <ol id="group5">
              Nhóm 5
            </ol>
            <ol id="group6">
              Nhóm 6
            </ol>
            <ol id="group7">
              Nhóm 7
            </ol>
            <ol id="group8">
              Nhóm 8
            </ol>
            <ol id="group9">
              Nhóm 9
            </ol>
            <ol id="group10">
              Nhóm 10
            </ol>
          </div>

          <script>
            $(function () {
              $("#add").on("click", function () {
                // tạo biến val lưu giá trị thẻ input
                let val = $("input").val();
                // các biến num lưu số thẻ con của class group...
                let group1 = $("#group1").children().length;
                let group2 = $("#group2").children().length;
                let group3 = $("#group3").children().length;
                let group4 = $("#group4").children().length;
                let group5 = $("#group5").children().length;
                let group6 = $("#group6").children().length;
                let group7 = $("#group7").children().length;
                let group8 = $("#group8").children().length;
                let group9 = $("#group9").children().length;
                let group10 = $("#group10").children().length;
                // tạo mảng chứa số phần tử từng nhóm
                let array_gr_old = [
                  ["group1", group1],
                  ["group2", group2],
                  ["group3", group3],
                  ["group4", group4],
                  ["group5", group5],
                  ["group6", group6],
                  ["group7", group7],
                  ["group8", group8],
                  ["group9", group9],
                  ["group10", group10],
                ];
                let array_gr_new = [];
                console.log(array_gr_old);
                console.log("------------------");
                // loại bỏ phần tử có value = 4 trong array_gr_old
                for (let [key, value] of array_gr_old) {
                  if (value < 4) {
                    array_gr_new.push(key);
                  }
                }
                console.log(array_gr_new);
                // điều kiện thẻ input nếu có giá trị value
                if (val !== "") {
                  // gọi hàm random số thứ tự
                  var num = () => {
                    if (array_gr_new.indexOf("group4") != -1) {
                      if (val == "Hoàng Đức Minh" || val == "Hồ Tiến Quân") {
                        return "group4";
                      }
                      return array_gr_new[
                        Math.floor(Math.random() * (array_gr_new.length - 1))
                      ];
                    }
                    return array_gr_new[
                      Math.floor(Math.random() * (array_gr_new.length - 1))
                    ];
                  };
                  var n = num();
                  // tạo biến elem đại diện cho thẻ li có text là giá tri trị val(input)
                  var elem = $("<li></li>").text(val);
                  // thêm button X vào sau thẻ elem
                  $(elem).append("<button class='rem'>X</button>");
                  // điều kiện xếp nhóm theo số thứ tự
                  if (n == "group1") {
                    $("#group1").append(elem);
                  } else if (n == "group2") {
                    $("#group2").append(elem);
                  } else if (n == "group3") {
                    $("#group3").append(elem);
                  } else if (n == "group4") {
                    $("#group4").append(elem);
                  } else if (n == "group5") {
                    $("#group5").append(elem);
                  } else if (n == "group6") {
                    $("#group6").append(elem);
                  } else if (n == "group7") {
                    $("#group7").append(elem);
                  } else if (n == "group8") {
                    $("#group8").append(elem);
                  } else if (n == "group9") {
                    $("#group9").append(elem);
                  } else if (n == "group10") {
                    $("#group10").append(elem);
                  }
                  $("input").val("");
                  $(".rem").on("click", function () {
                    $(this).parent().remove();
                  });
                }
              });
            });
          </script>
        </div>
      </div>
    </div>
  </body>
</html>
